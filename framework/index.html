
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../template/">
      
      
        <link rel="next" href="../user-experience/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.42">
    
    
      
        <title>5. The Framework - Dynatrace Enablement Framework</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.0253249f.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
  <!-- Add scripts that need to run before here -->
  
      
    
  <!-- Add scripts that need to run afterwards here -->
   <!-- BeforeGoLive: Replace Agentless RUM Snippet
    1. Create an agentless application in Dynatrace from with convention 'dynatrace-wwse/repositoryname'
    2. https://geu80787.apps.dynatrace.com/ui/apps/dynatrace.classic.deploy.agentless/#install/agentless;gtf=-2h;gf=all
    <script type="text/javascript" src="https://js-cdn.dynatrace.com/jstag/PLACEHOLDEr/REPLACE_WITH_YOUR_SNIPPET/1234abcd1234abcd_complete.js" crossorigin="anonymous"></script>
    -->
    <script type="text/javascript" src="https://js-cdn.dynatrace.com/jstag/1612cf70810/bf81393wlb/ff78563295ff1e42_complete.js" crossorigin="anonymous"></script>    

    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#container-configuration-for-vs-code" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Dynatrace Enablement Framework" class="md-header__button md-logo" aria-label="Dynatrace Enablement Framework" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Dynatrace Enablement Framework
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              5. The Framework
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to system preference"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to system preference" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/dynatrace-wwse/codespaces-framework" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    View Code on GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Dynatrace Enablement Framework" class="md-nav__button md-logo" aria-label="Dynatrace Enablement Framework" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Dynatrace Enablement Framework
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/dynatrace-wwse/codespaces-framework" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    View Code on GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    1. Introduction
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../container-image/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    2. Container image
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../instantiation-types/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3. Instantiation types
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../template/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4. Codespaces Template
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    5. The Framework
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    5. The Framework
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#container-configuration-for-vs-code" class="md-nav__link">
    <span class="md-ellipsis">
      🟦 Container Configuration for VS Code
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentation-workflow-docs" class="md-nav__link">
    <span class="md-ellipsis">
      🟩 Documentation Workflow (docs/)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🟩 Documentation Workflow (docs/)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#live-documentation" class="md-nav__link">
    <span class="md-ellipsis">
      Live Documentation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploying-to-github-pages" class="md-nav__link">
    <span class="md-ellipsis">
      Deploying to GitHub Pages
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#app-repository-apps" class="md-nav__link">
    <span class="md-ellipsis">
      🟨 App Repository (apps/)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🟨 App Repository (apps/)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#port-allocation-and-nodeport-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      Port Allocation and NodePort Strategy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#managing-apps-with-deployapps" class="md-nav__link">
    <span class="md-ellipsis">
      Managing Apps with deployApps
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Managing Apps with deployApps">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#to-deploy-an-app" class="md-nav__link">
    <span class="md-ellipsis">
      To deploy an app
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-undeploy-an-app" class="md-nav__link">
    <span class="md-ellipsis">
      To undeploy an app
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-locally" class="md-nav__link">
    <span class="md-ellipsis">
      🟧 Running Locally
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#github-actions-integration-tests" class="md-nav__link">
    <span class="md-ellipsis">
      🟪 GitHub Actions &amp; Integration Tests
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🟪 GitHub Actions & Integration Tests">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#integration-test-function" class="md-nav__link">
    <span class="md-ellipsis">
      Integration Test Function
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kubernetes-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      🟫 Kubernetes Cluster
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🟫 Kubernetes Cluster">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#managing-the-kind-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      Managing the Kind Cluster
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker-socket-mapping-entrypointsh" class="md-nav__link">
    <span class="md-ellipsis">
      🐳 Docker Socket Mapping (entrypoint.sh)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#container-post-creation-start-post-createsh-post-startsh" class="md-nav__link">
    <span class="md-ellipsis">
      🟦 Container Post-Creation &amp; Start (post-create.sh, post-start.sh)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#core-functions-util" class="md-nav__link">
    <span class="md-ellipsis">
      🟥 Core Functions (util/)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-functions" class="md-nav__link">
    <span class="md-ellipsis">
      🟫 Custom Functions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#license" class="md-nav__link">
    <span class="md-ellipsis">
      📄 License
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-experience/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6. User Experience
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../synchronizer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    7. Synchronizer
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../testing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    8. Testing
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../monitoring/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    9. Monitoring
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../resources/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    10. Resources
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../whats-next/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    11. What's next?
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#container-configuration-for-vs-code" class="md-nav__link">
    <span class="md-ellipsis">
      🟦 Container Configuration for VS Code
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#documentation-workflow-docs" class="md-nav__link">
    <span class="md-ellipsis">
      🟩 Documentation Workflow (docs/)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🟩 Documentation Workflow (docs/)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#live-documentation" class="md-nav__link">
    <span class="md-ellipsis">
      Live Documentation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deploying-to-github-pages" class="md-nav__link">
    <span class="md-ellipsis">
      Deploying to GitHub Pages
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#app-repository-apps" class="md-nav__link">
    <span class="md-ellipsis">
      🟨 App Repository (apps/)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🟨 App Repository (apps/)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#port-allocation-and-nodeport-strategy" class="md-nav__link">
    <span class="md-ellipsis">
      Port Allocation and NodePort Strategy
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#managing-apps-with-deployapps" class="md-nav__link">
    <span class="md-ellipsis">
      Managing Apps with deployApps
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Managing Apps with deployApps">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#to-deploy-an-app" class="md-nav__link">
    <span class="md-ellipsis">
      To deploy an app
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#to-undeploy-an-app" class="md-nav__link">
    <span class="md-ellipsis">
      To undeploy an app
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#running-locally" class="md-nav__link">
    <span class="md-ellipsis">
      🟧 Running Locally
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#github-actions-integration-tests" class="md-nav__link">
    <span class="md-ellipsis">
      🟪 GitHub Actions &amp; Integration Tests
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🟪 GitHub Actions & Integration Tests">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#integration-test-function" class="md-nav__link">
    <span class="md-ellipsis">
      Integration Test Function
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kubernetes-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      🟫 Kubernetes Cluster
    </span>
  </a>
  
    <nav class="md-nav" aria-label="🟫 Kubernetes Cluster">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#managing-the-kind-cluster" class="md-nav__link">
    <span class="md-ellipsis">
      Managing the Kind Cluster
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker-socket-mapping-entrypointsh" class="md-nav__link">
    <span class="md-ellipsis">
      🐳 Docker Socket Mapping (entrypoint.sh)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#container-post-creation-start-post-createsh-post-startsh" class="md-nav__link">
    <span class="md-ellipsis">
      🟦 Container Post-Creation &amp; Start (post-create.sh, post-start.sh)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#core-functions-util" class="md-nav__link">
    <span class="md-ellipsis">
      🟥 Core Functions (util/)
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#custom-functions" class="md-nav__link">
    <span class="md-ellipsis">
      🟫 Custom Functions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#license" class="md-nav__link">
    <span class="md-ellipsis">
      📄 License
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>5. The Framework</h1>

<script>
document.addEventListener('DOMContentLoaded', function() {
  dynatrace.sendBizEvent('page_load', {"page": "5. The Framework"});
});
</script>

<p><img _=";" align="right" alt="run codespace" src="../img/framework.png" width="400" />
This section outlines the structure and purpose of each component in the Codespaces Enablement Framework, as visualized in the architecture diagram.</p>
<hr />
<h2 id="container-configuration-for-vs-code">🟦 Container Configuration for VS Code<a class="headerlink" href="#container-configuration-for-vs-code" title="Permanent link">#</a></h2>
<p>Defines the development container for VS Code and Codespaces. Extensions are kept minimal to ensure portability across platforms (ARM and AMD), allowing the environment to run in plain Docker or on different architectures.</p>
<ul>
<li><strong>Dockerfile</strong>: Specifies the base image and all required tools/libraries.</li>
<li><strong>devcontainer.json</strong>: Main configuration file for the development container. It defines settings, installed extensions, mounted volumes, arguments, environment variables, and how VS Code should start and connect to the container.</li>
</ul>
<hr />
<h2 id="documentation-workflow-docs">🟩 Documentation Workflow (<code>docs/</code>)<a class="headerlink" href="#documentation-workflow-docs" title="Permanent link">#</a></h2>
<ul>
<li><strong>docs/</strong>: Contains all documentation and site configuration.</li>
<li><strong>mkdocs.yaml</strong>: Defines navigation and site structure for MkDocs.</li>
<li><strong>.github/workflows/deploy-ghpages.yaml</strong>: GitHub Actions workflow to deploy documentation to GitHub Pages when a PR is merged into main.</li>
</ul>
<h3 id="live-documentation">Live Documentation<a class="headerlink" href="#live-documentation" title="Permanent link">#</a></h3>
<ul>
<li><strong>installMkdocs</strong>: Installs all requirements for MkDocs (including Python dependencies from <code>docs/requirements/requirements-mkdocs.txt</code>) and exposes the documentation locally. This is the recommended way to set up the documentation server in your dev container.</li>
<li><strong>exposeMkdocs</strong>: Launches the MkDocs development server on port 8000 inside your dev container, making the documentation available for live preview with live reload. This function is called by <strong>installMkdocs</strong>.</li>
</ul>
<h3 id="deploying-to-github-pages">Deploying to GitHub Pages<a class="headerlink" href="#deploying-to-github-pages" title="Permanent link">#</a></h3>
<ul>
<li><strong>deployGhdocs</strong>: Builds and deploys the documentation to GitHub Pages using <code>mkdocs gh-deploy</code>, publishing your latest docs to the configured GitHub Pages site.</li>
</ul>
<hr />
<h2 id="app-repository-apps">🟨 App Repository (<code>apps/</code>)<a class="headerlink" href="#app-repository-apps" title="Permanent link">#</a></h2>
<p>This directory contains the application code and sample apps to be included in the enablement. Each app should have its own subfolder inside <code>apps/</code>.</p>
<h3 id="port-allocation-and-nodeport-strategy">Port Allocation and NodePort Strategy<a class="headerlink" href="#port-allocation-and-nodeport-strategy" title="Permanent link">#</a></h3>
<p>When deploying applications, the framework automatically allocates the ports exposed by the Kind Kubernetes cluster using the NodePort strategy. The <code>getNextFreeAppPort</code> function is called before deploying each app to select an available port from the defined range. By default, three ports are used, as defined in the <code>PORTS</code> variable in <code>.devcontainer/util/variables.sh</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nv">PORTS</span><span class="o">=(</span><span class="s2">&quot;30100&quot;</span><span class="w"> </span><span class="s2">&quot;30200&quot;</span><span class="w"> </span><span class="s2">&quot;30300&quot;</span><span class="o">)</span>
</code></pre></div>
<p>These ports are mapped to your applications, making them accessible from your host machine. The NodePort strategy ensures each app can be reached via a unique port on the cluster node.</p>
<h3 id="managing-apps-with-deployapps">Managing Apps with <code>deployApps</code><a class="headerlink" href="#managing-apps-with-deployapps" title="Permanent link">#</a></h3>
<p>The framework provides a <code>deployApps</code> function to help you deploy and undeploy the applications listed in the <code>apps/</code> directory to your Kubernetes cluster.</p>
<p>Running <code>deployApps</code> without parameters displays an interactive help menu listing all available apps, their aliases, and their compatibility (AMD/ARM). Example output:</p>
<p><img _=";" align="center" alt="deployApps" src="../img/deployApps.png" /> </p>
<h4 id="to-deploy-an-app">To deploy an app<a class="headerlink" href="#to-deploy-an-app" title="Permanent link">#</a></h4>
<ul>
<li>Use any of the listed numbers, characters, or names. For example, to deploy <code>astroshop</code>, you can run:
    <div class="highlight"><pre><span></span><code>deployApps<span class="w"> </span><span class="m">2</span>
<span class="c1"># or</span>
deployApps<span class="w"> </span>b
<span class="c1"># or</span>
deployApps<span class="w"> </span>astroshop
</code></pre></div></li>
</ul>
<h4 id="to-undeploy-an-app">To undeploy an app<a class="headerlink" href="#to-undeploy-an-app" title="Permanent link">#</a></h4>
<ul>
<li>Add <code>-d</code> as an extra argument:
    <div class="highlight"><pre><span></span><code>deployApps<span class="w"> </span><span class="m">2</span><span class="w"> </span>-d
<span class="c1"># or</span>
deployApps<span class="w"> </span>astroshop<span class="w"> </span>-d<span class="w"> </span>
</code></pre></div></li>
</ul>
<p>Each app folder should contain its own deployment and cleanup scripts or instructions. The <code>deployApps</code> function will call these as needed.</p>
<hr />
<h2 id="running-locally">🟧 Running Locally<a class="headerlink" href="#running-locally" title="Permanent link">#</a></h2>
<p>To quickly start a local development container, run:</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span><span class="w"> </span>.devcontainer
make<span class="w"> </span>start
</code></pre></div>
<p>Scripts and configuration for building and running the environment outside Codespaces include:</p>
<ul>
<li><strong>Makefile</strong>: Main entrypoint for local development (<code>make start</code>). It defines targets for starting, stopping, and managing the local container environment.</li>
<li>
<p><strong>makefile.sh</strong>: Contains the core Bash logic for building, running, and managing the container. The Makefile sources this script to execute its targets. Key responsibilities include:</p>
<ul>
<li>Building the Docker image if it does not exist</li>
<li>Starting the container with the correct environment, ports, and volumes</li>
<li>Attaching to a running container or recreating it if stopped</li>
<li>Handling cleanup and removal of containers/images</li>
<li>Providing utility functions for logs, shell access, and status checks</li>
</ul>
<p>This separation allows you to keep complex logic in Bash, while the Makefile provides a simple interface for users.</p>
</li>
<li>
<p><strong>runlocal/</strong>: Local environment configuration, including:</p>
<ul>
<li><code>.env</code>: Secrets and environment variables for local runs.</li>
<li><code>helper.sh</code>: Helper scripts for local setup.</li>
</ul>
</li>
</ul>
<hr />
<h2 id="github-actions-integration-tests">🟪 GitHub Actions &amp; Integration Tests<a class="headerlink" href="#github-actions-integration-tests" title="Permanent link">#</a></h2>
<p>Automation for CI/CD and integration testing:
- <strong>.github/workflows/integration-tests.yaml</strong>: Workflow for running integration tests on every Pull Request (PR) and push. The <code>main</code> branch is protected: integration tests must pass for any PR before it can be merged into <code>main</code>.
- <strong>test/</strong>: Contains test scripts:
    - <code>integration.sh</code>: Main integration test runner.
    - <code>test_functions.sh</code>: Test utilities and functions.</p>
<h3 id="integration-test-function">Integration Test Function<a class="headerlink" href="#integration-test-function" title="Permanent link">#</a></h3>
<ul>
<li><strong>runIntegrationTests</strong>: This function triggers the integration tests for the repository by running the <code>integration.sh</code> script. It is used both locally and by the CI pipeline to ensure the environment and applications work as expected before merging changes.</li>
</ul>
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">integration.sh</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1"># Load framework</span>
<span class="nb">source</span><span class="w"> </span>.devcontainer/util/source_framework.sh

printInfoSection<span class="w"> </span><span class="s2">&quot;Running integration Tests for </span><span class="nv">$RepositoryName</span><span class="s2">&quot;</span>

assertRunningPod<span class="w"> </span>dynatrace<span class="w"> </span>operator

assertRunningPod<span class="w"> </span>dynatrace<span class="w"> </span>activegate

assertRunningPod<span class="w"> </span>dynatrace<span class="w"> </span>oneagent

assertRunningPod<span class="w"> </span>todoapp<span class="w"> </span>todoapp

assertRunningApp<span class="w"> </span><span class="m">30100</span>
</code></pre></div></td></tr></table></div>
<p>These assertions check that the required pods (operator, activegate, oneagent, and todoapp) are running in their respective namespaces, and that the application is accessible on the expected port (30100). If any assertion fails, the integration test will fail and block the PR from being merged.</p>
<hr />
<h2 id="kubernetes-cluster">🟫 Kubernetes Cluster<a class="headerlink" href="#kubernetes-cluster" title="Permanent link">#</a></h2>
<p>The Kubernetes cluster for the enablement is defined in the <code>kind-cluster.yaml</code> file. This configuration is used by <a href="https://kind.sigs.k8s.io/">Kind</a> (Kubernetes IN Docker) to spin up a local Kubernetes cluster as a Docker container, using the Docker-in-socket strategy. The enablement container attaches to the Kind cluster, allowing you to deploy and test applications in a real Kubernetes environment.</p>
<h3 id="managing-the-kind-cluster">Managing the Kind Cluster<a class="headerlink" href="#managing-the-kind-cluster" title="Permanent link">#</a></h3>
<p>The following functions are provided to manage the lifecycle of the Kind cluster:</p>
<ul>
<li><strong>startKindCluster</strong>: Starts the Kind cluster. If a cluster is already running, it attaches to it; if stopped, it starts it; if none exists, it creates a new one.</li>
<li><strong>attachKindCluster</strong>: Attaches your environment to a running Kind cluster by configuring your kubeconfig for access.</li>
<li><strong>createKindCluster</strong>: Creates a new Kind cluster using the configuration in <code>kind-cluster.yaml</code>.</li>
<li><strong>stopKindCluster</strong>: Stops the Kind cluster Docker container.</li>
<li><strong>deleteKindCluster</strong>: Deletes the Kind cluster and removes all associated resources.</li>
</ul>
<p>These functions allow you to easily start, stop, attach, create, or delete your local Kubernetes cluster for development and testing.</p>
<p>The <code>kubectl</code> client, <code>helm</code>, and <code>k9s</code> are automatically configured to work with the Kind cluster, so you can manage and observe your Kubernetes resources out of the box.</p>
<hr />
<h2 id="docker-socket-mapping-entrypointsh">🐳 Docker Socket Mapping (<code>entrypoint.sh</code>)<a class="headerlink" href="#docker-socket-mapping-entrypointsh" title="Permanent link">#</a></h2>
<p>This section enables the container to access the host's Docker daemon by mounting the Docker socket (<code>/var/run/docker.sock</code>). This allows the container to start and manage sibling containers, which is essential for running Kind and other Docker-based tools inside the dev environment.</p>
<p><strong>entrypoint.sh</strong>: This script is executed when the container starts. It sets up the environment, ensures the Docker socket is available, and configures any required permissions or environment variables so that Docker commands work seamlessly inside the container.</p>
<hr />
<h2 id="container-post-creation-start-post-createsh-post-startsh">🟦 Container Post-Creation &amp; Start (<code>post-create.sh</code>, <code>post-start.sh</code>)<a class="headerlink" href="#container-post-creation-start-post-createsh-post-startsh" title="Permanent link">#</a></h2>
<div class="admonition tip">
<p class="admonition-title">Repository-Specific Logic</p>
<p>Use these files to define logic for automating the creation and setup of your enablement.</p>
</div>
<p>These scripts automate the setup and initialization of your development container:</p>
<ul>
<li>
<p><strong>post-create.sh</strong>: Runs after the Codespace or dev container is created. It loads all framework and custom functions into the shell, then executes a series of setup steps in order:</p>
<p>Example <code>post-create.sh</code>:
<div class="highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">.devcontainer/post-create.sh</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="ch">#!/bin/bash</span>
<span class="c1"># Load functions</span>
<span class="nb">export</span><span class="w"> </span><span class="nv">SECONDS</span><span class="o">=</span><span class="m">0</span>
<span class="nb">source</span><span class="w"> </span>.devcontainer/util/source_framework.sh

setUpTerminal

startKindCluster

installK9s

dynatraceDeployOperator

deployCloudNative

deployTodoApp

finalizePostCreation

printInfoSection<span class="w"> </span><span class="s2">&quot;Your dev container finished creating&quot;</span>
</code></pre></div></td></tr></table></div></p>
</li>
<li>
<p><strong>post-start.sh</strong>: Runs every time the container starts (e.g., refresh tokens, check dependencies, interact with the user).</p>
</li>
</ul>
<hr />
<h2 id="core-functions-util">🟥 Core Functions (<code>util/</code>)<a class="headerlink" href="#core-functions-util" title="Permanent link">#</a></h2>
<p>This directory contains reusable shell functions, variables, and logic that power the framework. These scripts are loaded into every shell session, making their utilities available for all automation and interactive tasks.</p>
<ul>
<li><strong>functions.sh</strong>: Main library of core functions for the framework. Includes:<ul>
<li>Logging and info utilities (<code>printInfo</code>, <code>printWarn</code>, <code>printError</code>, <code>printInfoSection</code>)</li>
<li>Kubernetes helpers (e.g., <code>waitForPod</code>, <code>waitForAllPods</code>, <code>waitForAllReadyPods</code>)</li>
<li>Application deployment, integration, and environment management functions</li>
<li>Functions for tracking codespace creation, printing greetings, and more</li>
<li>All functions are loaded dynamically for use in the shell or scripts</li>
</ul>
</li>
<li><strong>source_framework.sh</strong>: Loads the framework and all utility scripts into the shell, ensuring both core and custom functions are available in every environment (Codespaces, VS Code, or plain Docker).</li>
<li><strong>greeting.sh</strong>: Displays a welcome message and branding when a new shell session starts, including useful environment info and quickstart tips. Print the greeting at any time by calling the <code>printGreeting</code> function or by opening a new zsh terminal.</li>
<li><strong>variables.sh</strong>: Central place for defining and exporting all default variables, such as image versions, port ranges, and environment-specific settings. This ensures consistency and easy configuration across the framework.</li>
</ul>
<hr />
<h2 id="custom-functions">🟫 Custom Functions<a class="headerlink" href="#custom-functions" title="Permanent link">#</a></h2>
<ul>
<li><strong>my_functions.sh</strong>: Define repository-specific or custom functions here. This file is loaded after the core framework, allowing you to override or extend any behavior. For example, add a function to deploy your own app and call it from <code>post-create.sh</code>.</li>
</ul>
<hr />
<h2 id="license">📄 License<a class="headerlink" href="#license" title="Permanent link">#</a></h2>
<p>This project is licensed under the Apache 2.0 License.</p>
<hr />
<div class="grid cards">
<ul>
<li><a href="../user-experience/">Let's continue<span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13.22 19.03a.75.75 0 0 1 0-1.06L18.19 13H3.75a.75.75 0 0 1 0-1.5h14.44l-4.97-4.97a.749.749 0 0 1 .326-1.275.75.75 0 0 1 .734.215l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0"/></svg></span></a></li>
</ul>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.copy"], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.83f73b43.min.js"></script>
      
    
  </body>
</html>